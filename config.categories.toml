# Example Clawly configuration with category-based selective abliteration.
# Rename this file to config.toml to use it.
#
# Category mode allows you to selectively uncensor specific categories
# while preserving refusal behavior for others.
# Each category has a weight from 0.0 (preserve refusal) to 1.0 (full abliteration).

# Use the built-in "default" preset which includes:
# - violence (weight 1.0 = full abliteration)
# - drugs (weight 1.0 = full abliteration)
# - adult_content (weight 1.0 = full abliteration)
# - self_harm (weight 0.0 = preserve refusal)
category_preset = "default"

# Orthogonalize category directions using Gram-Schmidt to reduce interference
# between categories. Recommended when using 3+ categories.
orthogonalize_categories = true

# LoRA rank for multi-category SVD decomposition.
# Higher values capture more of the category-specific information
# but produce larger adapters.
category_lora_rank = 8

# Standard settings below
n_trials = 200
n_startup_trials = 60
batch_size = 0
system_prompt = "You are a helpful assistant."

[good_prompts]
dataset = "mlabonne/harmless_alpaca"
split = "train[:400]"
column = "text"

[bad_prompts]
dataset = "mlabonne/harmful_behaviors"
split = "train[:400]"
column = "text"

[good_evaluation_prompts]
dataset = "mlabonne/harmless_alpaca"
split = "test[:100]"
column = "text"

[bad_evaluation_prompts]
dataset = "mlabonne/harmful_behaviors"
split = "test[:100]"
column = "text"
